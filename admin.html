<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALOHA Admin</title>
    <link rel="icon" href="./assets/img/logo/logo.png" type="image/x-icon" />


    <!-- Link CSS -->
    <link rel="stylesheet" href="./assets/CSS/base-admin.css">
    <link rel="stylesheet" href="./assets/CSS/admin.css">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>

    <!--Link Icon Awesome-->
    <script src="https://kit.fontawesome.com/c89546c2fd.js" crossorigin="anonymous"></script>


</head>

<body>
    <?php 
        require_once "./sidebar.html";
        include_once "./side-bar.html";
    ?>

    <section>
        <!-- NOTICE-BELL -->
        <div class="notice">
            <div class="dropdown">
                <?php
                    include './assets/PHP/connectdb.php';
                    $get_news = mysqli_query($conn, "SELECT * FROM notification WHERE Status = 0 LIMIT 5");
                    $get_names = mysqli_query($conn, "SELECT * FROM customer c, notification n WHERE  c.IdCustomer = n.IdCustomer");
                    $count_news = $get_news->num_rows;
                ?>
                <button onclick="myFunction()" >
                        <i class="dropbtn fa-solid fa-bell"><div id="count-news"><?php echo $count_news; ?></div></i>
                </button>
                <div id="myDropdown" class="dropdown-content">
                    <?php
                        while($show_news = $get_news->fetch_assoc()) {
                            echo 
                            '<a>
                                <div class="notify-info" style="cursor: pointer;">
                                    <p style="margin: 0;">'.$get_names->fetch_assoc()["CustomerName"].' đã đặt</p>
                                    <span class="notify-time">10 minutes ago</span>
                                </div>
                            </a>';
                        }
                    ?>                            
                    <a href="" style="padding: 5px 0; background: #fff;"><div style="text-align: center;">Xem tất cả</div></a>                    
                </div>

            </div>
        </div>
        
        </div>

        <!-- SCRIPT bell-->
        <script>
            /* When the user clicks on the button, 
            toggle between hiding and showing the dropdown content */
            function myFunction() {
                document.getElementById("myDropdown").classList.toggle("show");
            }

            // Close the dropdown if the user clicks outside of it
            window.onclick = function (event) {
                if (!event.target.matches('.dropbtn')) {
                    var dropdowns = document.getElementsByClassName("dropdown-content");
                    var i;
                    for (i = 0; i < dropdowns.length; i++) {
                        var openDropdown = dropdowns[i];
                        if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                        }
                    }
                }
            }
        </script>


        <div class="heading">
            <h1>TỔNG QUAN</h1>
        </div>

        <!-- TABLE ROOM -->
        <div class="table">
            <table class="total-table">
                <tr>
                    <td rowspan="3" style="min-width: 500px">
                        <div class="content">
                            <h1 class="amount">100</h1>
                            <p class="title-sub-content">Đặt phòng</p>
                        </div>

                    </td>
                    <td height="80">
                        <div class="room">
                            <p class="type-room">Phòng đơn</p>
                            <p class="number-room">12</p>
                        </div>
                    </td>

                </tr>
                <tr>
                    <td height="80">
                        <div class="room">
                            <p class="type-room">Phòng đôi</p>
                            <p class="number-room">25</p>
                        </div>
                    </td>

                </tr>
                <tr>
                    <td height="80">
                        <div class="room">
                            <p class="type-room">Phòng bốn</p>
                            <p class="number-room">63</p>
                        </div>
                    </td>

                </tr>
            </table>
        </div>
        <!-- TABLE SERVICE -->
        <div class="table">

            <table class="total-table">
                <tr>
                    <td rowspan="3" style="min-width: 500px">
                        <div class="content">
                            <h1 class="amount">100</h1>
                            <p class="title-sub-content">Đặt sự kiện</p>
                        </div>

                    </td>
                    <td height="80">
                        <div class="room">
                            <p class="type-room">Sinh nhật - Kỷ niệm</p>
                            <p class="number-room">12</p>
                        </div>
                    </td>

                </tr>
                <tr>

                    <td height="80">
                        <div class="room">
                            <p class="type-room">Tiệc cưới</p>
                            <p class="number-room">02</p>
                        </div>
                    </td>

                </tr>
                <tr>
                    <td height="80">
                        <div class="room">
                            <p class="type-room">Hội họp - Hội nghị</p>
                            <p class="number-room">63</p>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </section>
</body>

</html>